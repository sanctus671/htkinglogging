(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{zDS7:function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),e=t("ZZ/e"),o=t("Z4xi"),i=t("ri4K"),a=t("9B/o"),r=t("c7H9"),c=t("wd/R"),s=function(){function n(n,l,t,u,e,o){var i=this;this.emailComposer=n,this.plt=l,this.profileService=t,this.authenticationService=u,this.alertCtrl=e,this.iab=o,this.user={},this.authenticationService.getUserData().subscribe((function(n){i.user=n})),this.paymentTotal=0}return n.prototype.ngOnInit=function(){},n.prototype.ionViewDidEnter=function(){this.getPaymentTotal()},n.prototype.getBankAccount=function(){return this.user.profile&&this.user.profile.bank_account?this.user.profile.bank_account.replace(/(\+?\d{3})(\d+)(\d{2})/g,(function(n,l,t,u){return l+"*".repeat(t.length)+u})):"No bank account set"},n.prototype.getPaymentTotal=function(){var n=this;this.authenticationService.getPaymentTotal().then((function(l){console.log(l),n.paymentTotal=l}))},n.prototype.getNextPaymentDate=function(){return c().add(1,"months").startOf("month").format("DD/MM/YYYY")},n.prototype.openRate=function(){this.plt.is("ios")?this.iab.create("https://apps.apple.com/us/app/","_system"):this.iab.create("https://play.google.com/store/apps/details?id=com.sitters.app","_system")},n.prototype.openFollow=function(){this.iab.create("https://www.facebook.com/sittersapp","_system")},n.prototype.openEmail=function(){this.emailComposer.open({to:["hello@sittersapp.com"],subject:"Subject for your support query",body:"Provide details about the support you require.",isHtml:!0})},n.prototype.openChangeBankAccount=function(){var n=this;this.alertCtrl.create({header:"Change Bank Account",inputs:[{name:"bank_account",placeholder:"Bank Account Number",type:"number"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(l){if(l.bank_account){var t={bank_account:l.bank_account,user_id:n.user.id};n.user.profile.bank_account=l.bank_account,n.profileService.updateProfile(t).then((function(){}))}}}]}).then((function(n){n.present()}))},n.prototype.openChangePassword=function(){var n=this;this.alertCtrl.create({header:"Change Password",inputs:[{name:"password",placeholder:"Password",type:"password"},{name:"confirmPassword",placeholder:"Confirm Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(l){l.password&&l.confirmPassword&&l.password===l.confirmPassword?n.authenticationService.changePassword(n.user.email,l.password,l.confirmPassword).then((function(){n.alertCtrl.create({header:"Success",message:"Your password has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))})).catch((function(){n.alertCtrl.create({header:"Error",message:"There was an error while changing your password.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(l){setTimeout((function(){n.openChangePassword()}),200)}}]}).then((function(n){n.present()}))})):n.alertCtrl.create({header:"Error",message:"Passwords do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(l){setTimeout((function(){n.openChangePassword()}),200)}}]}).then((function(n){n.present()}))}}]}).then((function(n){n.present()}))},n.prototype.logout=function(){this.authenticationService.logout()},n}(),b=function(){return function(){}}(),p=t("pMnS"),h=t("oBZk"),m=t("ZYCi"),f=t("Ip0R"),k=u.rb({encapsulation:0,styles:[[".settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:20px;padding-top:10px}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]:first-child{margin-top:0;padding-top:0}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:0}.settings-list[_ngcontent-%COMP%]   ion-icon[name=trophy][_ngcontent-%COMP%]{color:#ffbf00}.settings-list[_ngcontent-%COMP%]   ion-icon[name=heart][_ngcontent-%COMP%]{color:#e31b23}.settings-list[_ngcontent-%COMP%]   ion-icon[name=logo-facebook][_ngcontent-%COMP%]{color:#3b5998}.settings-list[_ngcontent-%COMP%]   ion-icon[name=logo-twitter][_ngcontent-%COMP%]{color:#1da1f2}.settings-list[_ngcontent-%COMP%]   ion-icon[name=mail][_ngcontent-%COMP%]{color:grey}.settings-list[_ngcontent-%COMP%]   ion-icon[name=unlock][_ngcontent-%COMP%]{color:#d6a000}.settings-list[_ngcontent-%COMP%]   ion-icon[name=lock][_ngcontent-%COMP%]{color:#d47835}.settings-list[_ngcontent-%COMP%]   ion-icon[name=cloud-upload][_ngcontent-%COMP%]{color:#8cd0ef}.settings-list[_ngcontent-%COMP%]   ion-icon[name=locate][_ngcontent-%COMP%]{color:#90e483}"]],data:{}});function g(n){return u.Ob(0,[(n()(),u.tb(0,0,null,null,29,"div",[],null,null,null,null,null)),(n()(),u.tb(1,0,null,null,2,"ion-list-header",[],null,null,null,h.lb,h.y)),u.sb(2,49152,null,0,e.R,[u.h,u.k,u.z],null,null),(n()(),u.Mb(-1,0,["Admin"])),(n()(),u.tb(4,0,null,null,12,"ion-item",[["class","settings-list__payment"],["routerDirection","forward"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==u.Eb(n,6).onClick()&&e),"click"===l&&(e=!1!==u.Eb(n,8).onClick(t)&&e),e}),h.jb,h.v)),u.sb(5,49152,null,0,e.J,[u.h,u.k,u.z],{routerDirection:[0,"routerDirection"]},null),u.sb(6,16384,null,0,m.n,[m.m,m.a,[8,null],u.D,u.k],{routerLink:[0,"routerLink"]},null),u.Fb(7,1),u.sb(8,737280,null,0,e.Pb,[f.h,e.Kb,u.k,m.m,[2,m.n]],{routerDirection:[0,"routerDirection"]},null),(n()(),u.tb(9,0,null,0,1,"ion-icon",[["name","people"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(10,49152,null,0,e.E,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.tb(11,0,null,0,5,"ion-label",[],null,null,null,h.kb,h.w)),u.sb(12,49152,null,0,e.P,[u.h,u.k,u.z],null,null),(n()(),u.tb(13,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Manage Users"])),(n()(),u.tb(15,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Perform security checks on new users"])),(n()(),u.tb(17,0,null,null,12,"ion-item",[["class","settings-list__payment"],["routerDirection","forward"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==u.Eb(n,19).onClick()&&e),"click"===l&&(e=!1!==u.Eb(n,21).onClick(t)&&e),e}),h.jb,h.v)),u.sb(18,49152,null,0,e.J,[u.h,u.k,u.z],{routerDirection:[0,"routerDirection"]},null),u.sb(19,16384,null,0,m.n,[m.m,m.a,[8,null],u.D,u.k],{routerLink:[0,"routerLink"]},null),u.Fb(20,1),u.sb(21,737280,null,0,e.Pb,[f.h,e.Kb,u.k,m.m,[2,m.n]],{routerDirection:[0,"routerDirection"]},null),(n()(),u.tb(22,0,null,0,1,"ion-icon",[["name","card"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(23,49152,null,0,e.E,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.tb(24,0,null,0,5,"ion-label",[],null,null,null,h.kb,h.w)),u.sb(25,49152,null,0,e.P,[u.h,u.k,u.z],null,null),(n()(),u.tb(26,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Manage Payments"])),(n()(),u.tb(28,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),u.Mb(-1,null,["View upcoming payments and generate bank payment file"]))],(function(n,l){n(l,5,0,"forward");var t=n(l,7,0,"/manage-users/");n(l,6,0,t),n(l,8,0,"forward"),n(l,10,0,"people"),n(l,18,0,"forward");var u=n(l,20,0,"/manage-payments/");n(l,19,0,u),n(l,21,0,"forward"),n(l,23,0,"card")}),null)}function d(n){return u.Ob(0,[u.Gb(0,f.d,[u.u]),(n()(),u.tb(1,0,null,null,6,"ion-header",[],null,null,null,h.eb,h.q)),u.sb(2,49152,null,0,e.D,[u.h,u.k,u.z],null,null),(n()(),u.tb(3,0,null,0,4,"ion-toolbar",[["color","primary"]],null,null,null,h.Bb,h.N)),u.sb(4,49152,null,0,e.Eb,[u.h,u.k,u.z],{color:[0,"color"]},null),(n()(),u.tb(5,0,null,0,2,"ion-title",[],null,null,null,h.Ab,h.M)),u.sb(6,49152,null,0,e.Cb,[u.h,u.k,u.z],null,null),(n()(),u.Mb(-1,0,["Account"])),(n()(),u.tb(8,0,null,null,74,"ion-content",[],null,null,null,h.bb,h.n)),u.sb(9,49152,null,0,e.w,[u.h,u.k,u.z],null,null),(n()(),u.tb(10,0,null,0,72,"ion-list",[["class","settings-list"]],null,null,null,h.mb,h.x)),u.sb(11,49152,null,0,e.Q,[u.h,u.k,u.z],null,null),(n()(),u.ib(16777216,null,0,1,null,g)),u.sb(13,16384,null,0,f.k,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(n()(),u.tb(14,0,null,0,2,"ion-list-header",[],null,null,null,h.lb,h.y)),u.sb(15,49152,null,0,e.R,[u.h,u.k,u.z],null,null),(n()(),u.Mb(-1,0,["Balance"])),(n()(),u.tb(17,0,null,0,10,"ion-item",[["class","settings-list__payment"]],null,null,null,h.jb,h.v)),u.sb(18,49152,null,0,e.J,[u.h,u.k,u.z],null,null),(n()(),u.tb(19,0,null,0,1,"ion-icon",[["color","primary"],["name","cash"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(20,49152,null,0,e.E,[u.h,u.k,u.z],{color:[0,"color"],name:[1,"name"]},null),(n()(),u.tb(21,0,null,0,6,"ion-label",[],null,null,null,h.kb,h.w)),u.sb(22,49152,null,0,e.P,[u.h,u.k,u.z],null,null),(n()(),u.tb(23,0,null,0,2,"h2",[],null,null,null,null,null)),(n()(),u.Mb(24,null,["$",""])),u.Ib(25,2),(n()(),u.tb(26,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),u.Mb(27,null,["Next payment ",""])),(n()(),u.tb(28,0,null,0,12,"ion-item",[["class","settings-list__payment"]],null,null,null,h.jb,h.v)),u.sb(29,49152,null,0,e.J,[u.h,u.k,u.z],null,null),(n()(),u.tb(30,0,null,0,1,"ion-icon",[["color","dark"],["name","contact"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(31,49152,null,0,e.E,[u.h,u.k,u.z],{color:[0,"color"],name:[1,"name"]},null),(n()(),u.tb(32,0,null,0,5,"ion-label",[],null,null,null,h.kb,h.w)),u.sb(33,49152,null,0,e.P,[u.h,u.k,u.z],null,null),(n()(),u.tb(34,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Bank Account"])),(n()(),u.tb(36,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),u.Mb(37,null,["",""])),(n()(),u.tb(38,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openChangeBankAccount()&&u),u}),h.S,h.e)),u.sb(39,49152,null,0,e.m,[u.h,u.k,u.z],{fill:[0,"fill"]},null),(n()(),u.Mb(-1,0,["Change"])),(n()(),u.tb(41,0,null,0,2,"ion-list-header",[],null,null,null,h.lb,h.y)),u.sb(42,49152,null,0,e.R,[u.h,u.k,u.z],null,null),(n()(),u.Mb(-1,0,["Support"])),(n()(),u.tb(44,0,null,0,7,"ion-item",[],null,null,null,h.jb,h.v)),u.sb(45,49152,null,0,e.J,[u.h,u.k,u.z],null,null),(n()(),u.tb(46,0,null,0,1,"ion-icon",[["name","heart"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(47,49152,null,0,e.E,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.Mb(-1,0,[" Rate The App "])),(n()(),u.tb(49,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openRate()&&u),u}),h.S,h.e)),u.sb(50,49152,null,0,e.m,[u.h,u.k,u.z],{fill:[0,"fill"]},null),(n()(),u.Mb(-1,0,["Rate"])),(n()(),u.tb(52,0,null,0,7,"ion-item",[],null,null,null,h.jb,h.v)),u.sb(53,49152,null,0,e.J,[u.h,u.k,u.z],null,null),(n()(),u.tb(54,0,null,0,1,"ion-icon",[["name","logo-facebook"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(55,49152,null,0,e.E,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.Mb(-1,0,[" Follow Us "])),(n()(),u.tb(57,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openFollow()&&u),u}),h.S,h.e)),u.sb(58,49152,null,0,e.m,[u.h,u.k,u.z],{fill:[0,"fill"]},null),(n()(),u.Mb(-1,0,["Follow"])),(n()(),u.tb(60,0,null,0,7,"ion-item",[],null,null,null,h.jb,h.v)),u.sb(61,49152,null,0,e.J,[u.h,u.k,u.z],null,null),(n()(),u.tb(62,0,null,0,1,"ion-icon",[["name","mail"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(63,49152,null,0,e.E,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.Mb(-1,0,[" Contact Support "])),(n()(),u.tb(65,0,null,0,2,"ion-button",[["fill","outline"],["slot","end"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openEmail()&&u),u}),h.S,h.e)),u.sb(66,49152,null,0,e.m,[u.h,u.k,u.z],{fill:[0,"fill"]},null),(n()(),u.Mb(-1,0,["Email"])),(n()(),u.tb(68,0,null,0,2,"ion-list-header",[],null,null,null,h.lb,h.y)),u.sb(69,49152,null,0,e.R,[u.h,u.k,u.z],null,null),(n()(),u.Mb(-1,0,["Account Settings"])),(n()(),u.tb(71,0,null,0,6,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.openChangePassword()&&u),u}),h.jb,h.v)),u.sb(72,49152,null,0,e.J,[u.h,u.k,u.z],{detail:[0,"detail"]},null),(n()(),u.tb(73,0,null,0,1,"ion-icon",[["name","unlock"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(74,49152,null,0,e.E,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.tb(75,0,null,0,2,"ion-label",[],null,null,null,h.kb,h.w)),u.sb(76,49152,null,0,e.P,[u.h,u.k,u.z],null,null),(n()(),u.Mb(-1,0,["Change Password"])),(n()(),u.tb(78,0,null,0,4,"ion-item",[],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.logout()&&u),u}),h.jb,h.v)),u.sb(79,49152,null,0,e.J,[u.h,u.k,u.z],null,null),(n()(),u.tb(80,0,null,0,1,"ion-icon",[["name","lock"],["slot","start"]],null,null,null,h.fb,h.r)),u.sb(81,49152,null,0,e.E,[u.h,u.k,u.z],{name:[0,"name"]},null),(n()(),u.Mb(-1,0,[" Logout "]))],(function(n,l){var t=l.component;n(l,4,0,"primary"),n(l,13,0,"admin"===t.user.permission),n(l,20,0,"primary","cash"),n(l,31,0,"dark","contact"),n(l,39,0,"outline"),n(l,47,0,"heart"),n(l,50,0,"outline"),n(l,55,0,"logo-facebook"),n(l,58,0,"outline"),n(l,63,0,"mail"),n(l,66,0,"outline"),n(l,72,0,""),n(l,74,0,"unlock"),n(l,81,0,"lock")}),(function(n,l){var t=l.component,e=u.Nb(l,24,0,n(l,25,0,u.Eb(l,0),t.paymentTotal,"1.2-2"));n(l,24,0,e),n(l,27,0,t.getNextPaymentDate()),n(l,37,0,t.getBankAccount())}))}function C(n){return u.Ob(0,[(n()(),u.tb(0,0,null,null,1,"app-settings",[],null,null,null,d,k)),u.sb(1,114688,null,0,s,[o.a,e.Nb,r.a,i.a,e.b,a.a],null,null)],(function(n,l){n(l,1,0)}),null)}var P=u.pb("app-settings",s,C,{},{},[]),y=t("gIcY");t.d(l,"SettingsPageModuleNgFactory",(function(){return w}));var w=u.qb(b,[],(function(n){return u.Bb([u.Cb(512,u.j,u.bb,[[8,[p.a,P]],[3,u.j],u.x]),u.Cb(4608,f.m,f.l,[u.u,[2,f.x]]),u.Cb(4608,y.l,y.l,[]),u.Cb(4608,e.c,e.c,[u.z,u.g]),u.Cb(4608,e.Jb,e.Jb,[e.c,u.j,u.q]),u.Cb(4608,e.Ob,e.Ob,[e.c,u.j,u.q]),u.Cb(1073742336,f.b,f.b,[]),u.Cb(1073742336,y.k,y.k,[]),u.Cb(1073742336,y.b,y.b,[]),u.Cb(1073742336,e.Gb,e.Gb,[]),u.Cb(1073742336,m.p,m.p,[[2,m.u],[2,m.m]]),u.Cb(1073742336,b,b,[]),u.Cb(1024,m.k,(function(){return[[{path:"",component:s}]]}),[])])}))}}]);