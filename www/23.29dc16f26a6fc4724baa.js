(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{zDS7:function(n,e,t){"use strict";t.r(e);var l=t("CcnG"),o=t("ZZ/e"),i=t("ri4K"),s=t("9B/o"),r=t("c7H9"),c=t("KOTj"),u=t("QaJk"),a=function(){function n(n,e,t,l,o,i,s,r){var c=this;this.plt=n,this.profileService=e,this.authenticationService=t,this.alertCtrl=l,this.iab=o,this.offlineService=i,this.submissionService=s,this.loadingController=r,this.user={},this.authenticationService.getUserData().subscribe((function(n){c.user=n})),this.paymentTotal=0}return n.prototype.ngOnInit=function(){},n.prototype.ionViewDidEnter=function(){},n.prototype.syncData=function(){var n=this;this.loadingController.create({message:"Your submissions are being synced. Please wait...",duration:2e4}).then((function(e){n.loading=e,e.present()})),this.offlineService.uploadingSubmissions?this.showSuccess():(this.offlineService.getSubmissions().then((function(e){if(e){for(var t=0,l=e;t<l.length;t++){var o=l[t];n.submissionService.createSubmission(o.fields,o.form_id).then((function(){}))}n.submissionService.getSubmissions("").then((function(){n.showSuccess(),setTimeout((function(){n.offlineService.saveSubmissions([]),n.offlineService.submissionsUploaded()}),5e3)})).catch((function(){n.showError()}))}else n.showSuccess()})).catch((function(){n.showError()})),this.offlineService.getUpdateSubmissions().then((function(e){if(e){for(var t=0,l=e;t<l.length;t++){var o=l[t];n.submissionService.updateSubmission(o.id,o.fields).then((function(){}))}n.submissionService.getSubmissions("").then((function(){setTimeout((function(){n.offlineService.saveUpdateSubmissions([]),n.offlineService.submissionsUploaded()}),5e3)}))}})))},n.prototype.showSuccess=function(){var n=this;setTimeout((function(){n.loading.dismiss(),n.alertCtrl.create({header:"Success",message:"Your submissions have been synced",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))}),1e3)},n.prototype.showError=function(){var n=this;setTimeout((function(){n.loading.dismiss(),n.alertCtrl.create({header:"Error",message:"There was an error syncing your submissions. Please try again.",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))}),1e3)},n.prototype.openChangePassword=function(){var n=this;this.alertCtrl.create({header:"Change Password",inputs:[{name:"password",placeholder:"Password",type:"password"},{name:"confirmPassword",placeholder:"Confirm Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Change",handler:function(e){e.password&&e.confirmPassword&&e.password===e.confirmPassword?n.authenticationService.changePassword(n.user.email,e.password,e.confirmPassword).then((function(){n.alertCtrl.create({header:"Success",message:"Your password has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(n){}}]}).then((function(n){n.present()}))})).catch((function(){n.alertCtrl.create({header:"Error",message:"There was an error while changing your password.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(e){setTimeout((function(){n.openChangePassword()}),200)}}]}).then((function(n){n.present()}))})):n.alertCtrl.create({header:"Error",message:"Passwords do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Try Again",handler:function(e){setTimeout((function(){n.openChangePassword()}),200)}}]}).then((function(n){n.present()}))}}]}).then((function(n){n.present()}))},n.prototype.logout=function(){this.authenticationService.logout()},n}(),d=function(){return function(){}}(),f=t("pMnS"),g=t("oBZk"),m=l["\u0275crt"]({encapsulation:0,styles:[[".settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:20px;padding-top:10px}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]:first-child{margin-top:0;padding-top:0}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:0}.settings-list[_ngcontent-%COMP%]   ion-icon[name=trophy][_ngcontent-%COMP%]{color:#ffbf00}.settings-list[_ngcontent-%COMP%]   ion-icon[name=heart][_ngcontent-%COMP%]{color:#e31b23}.settings-list[_ngcontent-%COMP%]   ion-icon[name=logo-facebook][_ngcontent-%COMP%]{color:#1778f2}.settings-list[_ngcontent-%COMP%]   ion-icon[name=logo-twitter][_ngcontent-%COMP%]{color:#1da1f2}.settings-list[_ngcontent-%COMP%]   ion-icon[name=mail][_ngcontent-%COMP%]{color:grey}.settings-list[_ngcontent-%COMP%]   ion-icon[name=unlock][_ngcontent-%COMP%]{color:#d6a000}.settings-list[_ngcontent-%COMP%]   ion-icon[name=lock][_ngcontent-%COMP%]{color:#d47835}.settings-list[_ngcontent-%COMP%]   ion-icon[name=cloud-upload][_ngcontent-%COMP%]{color:#8cd0ef}.settings-list[_ngcontent-%COMP%]   ion-icon[name=locate][_ngcontent-%COMP%]{color:#90e483}.settings-list[_ngcontent-%COMP%]   ion-icon[name=eye][_ngcontent-%COMP%]{color:#222428}"]],data:{}});function h(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,11,"ion-header",[],null,null,null,g.J,g.i)),l["\u0275did"](1,49152,null,0,o.A,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](2,0,null,0,9,"ion-toolbar",[["color","primary"]],null,null,null,g.bb,g.A)),l["\u0275did"](3,49152,null,0,o.Bb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"]},null),(n()(),l["\u0275eld"](4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,g.F,g.e)),l["\u0275did"](5,49152,null,0,o.k,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](6,0,null,0,2,"ion-back-button",[["defaultHref","/login"]],null,[[null,"click"]],(function(n,e,t){var o=!0;return"click"===e&&(o=!1!==l["\u0275nov"](n,8).onClick(t)&&o),o}),g.D,g.c)),l["\u0275did"](7,49152,null,0,o.f,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{defaultHref:[0,"defaultHref"]},null),l["\u0275did"](8,16384,null,0,o.g,[[2,o.hb],o.Hb],{defaultHref:[0,"defaultHref"]},null),(n()(),l["\u0275eld"](9,0,null,0,2,"ion-title",[],null,null,null,g.ab,g.z)),l["\u0275did"](10,49152,null,0,o.zb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["Account"])),(n()(),l["\u0275eld"](12,0,null,null,22,"ion-content",[],null,null,null,g.G,g.f)),l["\u0275did"](13,49152,null,0,o.t,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](14,0,null,0,20,"ion-list",[["class","settings-list"]],null,null,null,g.P,g.n)),l["\u0275did"](15,49152,null,0,o.N,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](16,0,null,0,6,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.syncData()&&l),l}),g.M,g.l)),l["\u0275did"](17,49152,null,0,o.G,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{detail:[0,"detail"]},null),(n()(),l["\u0275eld"](18,0,null,0,1,"ion-icon",[["name","refresh"],["slot","start"]],null,null,null,g.K,g.j)),l["\u0275did"](19,49152,null,0,o.B,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null),(n()(),l["\u0275eld"](20,0,null,0,2,"ion-label",[],null,null,null,g.N,g.m)),l["\u0275did"](21,49152,null,0,o.M,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["Sync Submissions"])),(n()(),l["\u0275eld"](23,0,null,0,6,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.openChangePassword()&&l),l}),g.M,g.l)),l["\u0275did"](24,49152,null,0,o.G,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{detail:[0,"detail"]},null),(n()(),l["\u0275eld"](25,0,null,0,1,"ion-icon",[["name","unlock"],["slot","start"]],null,null,null,g.K,g.j)),l["\u0275did"](26,49152,null,0,o.B,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null),(n()(),l["\u0275eld"](27,0,null,0,2,"ion-label",[],null,null,null,g.N,g.m)),l["\u0275did"](28,49152,null,0,o.M,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275ted"](-1,0,["Change Password"])),(n()(),l["\u0275eld"](30,0,null,0,4,"ion-item",[],null,[[null,"click"]],(function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.logout()&&l),l}),g.M,g.l)),l["\u0275did"](31,49152,null,0,o.G,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(n()(),l["\u0275eld"](32,0,null,0,1,"ion-icon",[["name","lock"],["slot","start"]],null,null,null,g.K,g.j)),l["\u0275did"](33,49152,null,0,o.B,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null),(n()(),l["\u0275ted"](-1,0,[" Logout "]))],(function(n,e){n(e,3,0,"primary"),n(e,7,0,"/login"),n(e,8,0,"/login"),n(e,17,0,""),n(e,19,0,"refresh"),n(e,24,0,""),n(e,26,0,"unlock"),n(e,33,0,"lock")}),null)}function p(n){return l["\u0275vid"](0,[(n()(),l["\u0275eld"](0,0,null,null,1,"app-settings",[],null,null,null,h,m)),l["\u0275did"](1,114688,null,0,a,[o.Kb,r.a,i.a,o.a,s.a,c.a,u.a,o.Fb],null,null)],(function(n,e){n(e,1,0)}),null)}var C=l["\u0275ccf"]("app-settings",a,p,{},{},[]),b=t("Ip0R"),v=t("gIcY"),P=t("ZYCi");t.d(e,"SettingsPageModuleNgFactory",(function(){return w}));var w=l["\u0275cmf"](d,[],(function(n){return l["\u0275mod"]([l["\u0275mpd"](512,l.ComponentFactoryResolver,l["\u0275CodegenComponentFactoryResolver"],[[8,[f.a,C]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["\u0275mpd"](4608,b.l,b.k,[l.LOCALE_ID,[2,b.t]]),l["\u0275mpd"](4608,v.j,v.j,[]),l["\u0275mpd"](4608,o.b,o.b,[l.NgZone,l.ApplicationRef]),l["\u0275mpd"](4608,o.Gb,o.Gb,[o.b,l.ComponentFactoryResolver,l.Injector]),l["\u0275mpd"](4608,o.Lb,o.Lb,[o.b,l.ComponentFactoryResolver,l.Injector]),l["\u0275mpd"](1073742336,b.b,b.b,[]),l["\u0275mpd"](1073742336,v.i,v.i,[]),l["\u0275mpd"](1073742336,v.b,v.b,[]),l["\u0275mpd"](1073742336,o.Db,o.Db,[]),l["\u0275mpd"](1073742336,P.p,P.p,[[2,P.u],[2,P.m]]),l["\u0275mpd"](1073742336,d,d,[]),l["\u0275mpd"](1024,P.k,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);