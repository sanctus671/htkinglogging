{"version":3,"sources":["./src/app/pages/submissions/submissions.page.html","./src/app/pages/submissions/submissions-routing.module.ts","./src/app/pages/submissions/submissions.module.ts","./src/app/pages/submissions/submissions.page.scss","./src/app/pages/submissions/submissions.page.ts"],"names":[],"mappings":"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","file":"submissions-submissions-module.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n        <ion-title>\\n            Submissions\\n        </ion-title>\\n        \\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button [routerLink]=\\\"['/settings']\\\" routerDirection=\\\"forward\\\">\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"settings\\\"></ion-icon>\\n            </ion-button>   \\n            \\n        </ion-buttons>            \\n        \\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"submissions\\\">\\n    \\n    \\n\\n    <div class=\\\"submissions__filter\\\">     \\n        \\n        <ion-item>\\n            <ion-label position=\\\"floating\\\">Filter by group</ion-label>\\n            <ion-select [(ngModel)]=\\\"search\\\" (ionChange)=\\\"updateGroup()\\\">\\n                <ion-select-option value=\\\"all\\\">All</ion-select-option>\\n                <ion-select-option *ngFor=\\\"let formGroup of formGroups\\\" [value]=\\\"formGroup.id\\\">{{formGroup.name}}</ion-select-option>\\n            </ion-select>\\n        </ion-item>            \\n        \\n        \\n    </div>\\n\\n        \\n    <div class=\\\"submissions__loading\\\" *ngIf=\\\"loading\\\">\\n        <ion-spinner color=\\\"primary\\\"></ion-spinner>\\n    </div>    \\n        \\n  \\n    \\n    <div *ngIf=\\\"!loading\\\">\\n        <ion-list class=\\\"submissions__list\\\">\\n\\n\\n            <ion-item detail *ngFor=\\\"let submission of filteredSubmissions\\\" [routerLink]=\\\"['/submission/' + submission.id]\\\" routerDirection=\\\"forward\\\">\\n                <ion-label>\\n                    <h2>Submission #{{submission.id}}</h2>\\n                    <p>Submitted {{formatDate(submission.created_at)}}</p>\\n                </ion-label>\\n            </ion-item>       \\n\\n\\n        </ion-list>    \\n    </div> \\n\\n\\n    \\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SubmissionsPage } from './submissions.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SubmissionsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SubmissionsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SubmissionsPageRoutingModule } from './submissions-routing.module';\n\nimport { SubmissionsPage } from './submissions.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SubmissionsPageRoutingModule\n  ],\n  declarations: [SubmissionsPage]\n})\nexport class SubmissionsPageModule {}\n","module.exports = \".submissions.ios .submissions__search .submissions__search__filter {\\n  top: 12px;\\n}\\n.submissions .submissions__search {\\n  position: relative;\\n  margin-top: 10px;\\n}\\n.submissions .submissions__search .submissions__search__filter {\\n  position: absolute;\\n  top: 7px;\\n  right: 10px;\\n  font-size: 10px;\\n}\\n.submissions .submissions__list {\\n  margin-top: 15px;\\n}\\n.submissions .submissions__list ion-list-header {\\n  font-weight: 600;\\n}\\n.submissions .submissions__loading {\\n  text-align: center;\\n  margin-top: 60px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc3VibWlzc2lvbnMvRDpcXFRheWxvclxcRG9jdW1lbnRzXFxXZWJzaXRlc1xcaHRraW5nbG9nZ2luZ1xcYXBwL3NyY1xcYXBwXFxwYWdlc1xcc3VibWlzc2lvbnNcXHN1Ym1pc3Npb25zLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvc3VibWlzc2lvbnMvc3VibWlzc2lvbnMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1RO0VBQ0ksU0FBQTtBQ0xaO0FEV0k7RUFDSSxrQkFBQTtFQUNBLGdCQUFBO0FDVFI7QURXUTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0FDVFo7QURlSTtFQUNJLGdCQUFBO0FDYlI7QURlUTtFQUNRLGdCQUFBO0FDYmhCO0FEb0JJO0VBQ0ksa0JBQUE7RUFDQSxnQkFBQTtBQ2xCUiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3N1Ym1pc3Npb25zL3N1Ym1pc3Npb25zLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zdWJtaXNzaW9uc3tcclxuICAgIFxyXG4gICAgJi5pb3N7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIC5zdWJtaXNzaW9uc19fc2VhcmNoIC5zdWJtaXNzaW9uc19fc2VhcmNoX19maWx0ZXJ7XHJcbiAgICAgICAgICAgIHRvcDoxMnB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIC5zdWJtaXNzaW9uc19fc2VhcmNoe1xyXG4gICAgICAgIHBvc2l0aW9uOnJlbGF0aXZlO1xyXG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgICBcclxuICAgICAgICAuc3VibWlzc2lvbnNfX3NlYXJjaF9fZmlsdGVye1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIHRvcDogN3B4O1xyXG4gICAgICAgICAgICByaWdodDogMTBweDtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgLnN1Ym1pc3Npb25zX19saXN0e1xyXG4gICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaW9uLWxpc3QtaGVhZGVye1xyXG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICAuc3VibWlzc2lvbnNfX2xvYWRpbmd7XHJcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgIG1hcmdpbi10b3A6IDYwcHg7ICAgICAgICBcclxuICAgIH1cclxuICAgXHJcbn1cclxuIiwiLnN1Ym1pc3Npb25zLmlvcyAuc3VibWlzc2lvbnNfX3NlYXJjaCAuc3VibWlzc2lvbnNfX3NlYXJjaF9fZmlsdGVyIHtcbiAgdG9wOiAxMnB4O1xufVxuLnN1Ym1pc3Npb25zIC5zdWJtaXNzaW9uc19fc2VhcmNoIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBtYXJnaW4tdG9wOiAxMHB4O1xufVxuLnN1Ym1pc3Npb25zIC5zdWJtaXNzaW9uc19fc2VhcmNoIC5zdWJtaXNzaW9uc19fc2VhcmNoX19maWx0ZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogN3B4O1xuICByaWdodDogMTBweDtcbiAgZm9udC1zaXplOiAxMHB4O1xufVxuLnN1Ym1pc3Npb25zIC5zdWJtaXNzaW9uc19fbGlzdCB7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG59XG4uc3VibWlzc2lvbnMgLnN1Ym1pc3Npb25zX19saXN0IGlvbi1saXN0LWhlYWRlciB7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG4uc3VibWlzc2lvbnMgLnN1Ym1pc3Npb25zX19sb2FkaW5nIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tdG9wOiA2MHB4O1xufSJdfQ== */\"","import { Component, NgZone } from '@angular/core';\nimport {SubmissionService} from '../../services/submission/submission.service';\nimport {FormService} from '../../services/form/form.service';\nimport {AuthenticationService} from '../../services/authentication/authentication.service';\nimport { ToastController, ModalController,AlertController } from '@ionic/angular';\nimport { Router, RouterEvent, NavigationEnd } from '@angular/router';\n\nimport * as moment from 'moment';\n\n\n@Component({\n    selector: 'app-submissions',\n    templateUrl: './submissions.page.html',\n    styleUrls: ['./submissions.page.scss'],\n})\nexport class SubmissionsPage  {\n    \n    \n    public search:string;\n    public filters:any;\n    public loading:boolean;\n    \n    public user:any;\n    \n    public formGroups:Array<any>;\n    public submissions:Array<any>;\n    public filteredSubmissions:Array<any>;\n    \n    \n    constructor(private submissionService:SubmissionService, public toastController: ToastController, public modalController: ModalController,\n        private router: Router, private authenticationService:AuthenticationService, private alertCtrl: AlertController, private ngZone: NgZone,private formService:FormService) { \n        \n        this.loading = true;\n        \n        this.search = \"\";\n        \n        this.submissions = [];  \n        this.filteredSubmissions = [];      \n\n        this.user = {};\n        this.authenticationService.getUserData().subscribe((data) => {\n\n            this.ngZone.run(() => {\n                this.user = data;\n            });\n        });   \n        \n        \n        this.formGroups = [];\n        \n        this.formService.getFormGroups().then((data:any) => {\n            this.formGroups = data;\n        })\n            \n        \n        }\n\n    ngOnInit() {\n       \n    }\n\n    ionViewDidEnter(){\n        this.getSubmissions();\n    }\n    \n    public updateGroup(){\n        \n        if (!this.search || this.search === \"all\"){\n            this.filteredSubmissions = this.submissions.slice();\n            return;\n        }\n \n        \n        let submissions = []\n        \n        for (let submission of this.submissions){\n            if (submission.form && submission.form.form_group_id && submission.form.form_group_id === this.search){\n                submissions.push(submission);\n            }\n        }\n        \n        this.filteredSubmissions = submissions;\n        \n    }\n    \n        \n    public getSubmissions(){\n        this.submissionService.getSubmissions(this.search).then((data:any) => {\n\n                this.submissions = data.data;\n                this.filteredSubmissions = this.submissions.slice();\n                \n                if (this.search){\n                    this.updateGroup();\n                }\n                \n                this.loading = false;\n       \n        }).catch(() => {\n                this.loading = false;\n            }); \n\n    }\n \n    \n    \n    public doSearch(){\n        this.loading = true;\n        this.getSubmissions();\n        \n    }    \n    \n\n    \n    \n    public formatDate(date){\n        let localeOffset = -(new Date().getTimezoneOffset());\n        return moment(date).add(localeOffset, 'm').fromNow();\n    }\n    \n}\n"],"sourceRoot":""}